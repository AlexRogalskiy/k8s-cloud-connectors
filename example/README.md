# Тестовый сценарий

## Описание сценария
Отправляете приложению `POST`-запрос с именем образа, в `S3` кладётся файл, содержащий
тэг последней версии этого образа и время запроса 

- Сервер принимает POST-запросы с названием образа;
- Кладёт таску в очередь;
- Другой сервер мониторит таски в очереди, когда она появляется, забирает её и выполняет.

Все это реализовано внутри k8s-кластера с помощью **YandexCloudConnectors**.

## Запуск

В первую очередь необходимо собрать наше приложение и положить его в какой-нибудь реестр образов, доступный кластеру:

```shell
вставить
```

Для начала создадим в нашем фолдере новый сервисный аккаунт, который будет ответственным за это приложение:

```shell
вставить
```

Ему надо выдать соответствующие права:

```shell
вставить
```

После чего устанавливаем в кластер (предполагается, что он уже настроен, и его данные лежат в `~/.kube/config`) **YandexCloudConnectors**:

```shell
вставить
```

Ждём, пока *pod* с менеджером перейдёт в состояние `Running`, затем применяем к кластеру `yaml` с нашим приложением:

```shell
kubectl apply -f setup.yaml
```